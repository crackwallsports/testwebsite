#+TITLE: Renascence
#+AUTHOR: Xt3

* Use
#+BEGIN_SRC lisp
(load "articles/Renascence/Renascence")
(3Renascence:export-html)
#+END_SRC
* Prepare
#+BEGIN_SRC lisp :tangle yes
(ql:quickload :cl-who)

(defpackage Xt3.Page.Renascence
  (:use :cl :cl-who)
  (:nicknames :3Renascence)
  (:export :export-html)
  )
(in-package :Xt3.Page.Renascence)

#+END_SRC


* Helper
#+BEGIN_SRC lisp :tangle yes
(defun ->file (path str)
  (with-open-file (stream path
                          :direction :output
                          :if-exists :supersede
                          :external-format :utf-8)
    (format stream str)))
#+END_SRC

* Export
#+BEGIN_SRC lisp :tangle yes
(defun export-html ()
  (setf (html-mode) :html5)
  (->file "articles/Renascence/Renascence.html" (site-html)))

#+END_SRC
** Html
#+BEGIN_SRC lisp :tangle yes
(defun site-html ()
  (with-html-output-to-string (s nil :indent 2 :prologue t)
    (:html :lang "en"
           (:head (:meta :charset "utf-8")
                  (:link :rel "stylesheet" :href "/testwebsite/css/style.css")
                  (:style (str (site-css))))
           (:body (site-header s)
                  (site-main s)))))

(defun site-header (stream)
  (with-html-output (s stream :indent 2)
    (:header :class "side-header"
             (:a :class "logo" :href "/testwebsite/index.html"
                 (:img :src "/testwebsite/resource/carrot.PNG"))
             (:nav :class "contact" :role "navigation"
                   (:ul
                    (:li (:a :href "mailto:crackwallsports@gmail.com" "Email"))
                    (:li (:a :href "https://gtv.org/user/5e85cf42ca963f510b635c44"  "G|TV"))
                    (:li (:a :href "https://twitter.com/iamnotXt3" "Twitter")))))))

(defun site-main (stream)
  (with-html-output (s stream :indent 2)
    (:div :class "content"
          (3Rabbit s)
          :br)))



(defun site-css () nil "
html {
  font-size: 90%;
}
body {
margin: 0;
font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";
font-size: 1rem;
font-weight: 400;
line-height: 1.5;
text-align: left;
}
.side-header .contact {
 font-size: 130%}
.side-header .contact li{
display: inline}
.btn-link {
 color: black
}
.btn-link:hover {
 text-decoration:none
}
.topic cite {
 font-size: 88%
}
.topic q {
 border-left: 5px rgb(210, 212, 212) solid;
 display: block;
 padding: 5px 10px 5px 10px;
 text-align: justify;
}
 .topic q::before, q::before {
 display: block;
 content: \"\";
}
.topic li pre {
 display: inline;
 margin: 0;
 white-space: pre-wrap;
}
.topic li q {
 margin-left: 16px;
}

.content{
 padding-left: 3%;
 padding-right: 3%

}
.content .topic {
  border: 1px dashed black;
  padding: 3px;
}
small {
#  font-size: 80%;
}

")

#+END_SRC
* Nodes
#+BEGIN_SRC lisp :tangle yes
(let ((next 30000000000))
  (defun gen-id ()
    (incf next)))

(defun node-templete ()
  '(r-node s "2021.time" (node-id) "keys"
    (:li "Title"
     (link s "")
     (:small "Ref")
     (:q (:pre "
Content
")))))

(defun node-id ()
  (format nil "@~a" (get-universal-time)))

(defun node-keys (stream keys)
  (format stream "#{~a}" keys))


;; (defparameter *r-stream* nil)

(defun link (stream link &optional title)
  (let ((tle (if title title link)))
    (with-html-output (s stream :indent 2)
      (:a :href link (str tle)))))

(defmacro r-node (stream timestamp id keys content)
  `(with-html-output (s ,stream :indent 2)
     (:ul :class "r-node"
          (:small :class "node-ctime" (str ,timestamp))
          (:small :class "node-id" (str ,id))
          (:small :class "node-keys" (node-keys s ,keys))
          ,content)))




(defun 3Rabbit (stream)
  (with-html-output (s stream :indent 2)
    (:div :class "topic" "3Rabbit æµ‹è¯• : å…”å­ æ‰€è¨€ æ‰€æ€ æ‰€çœ‹ æ‰€å¬ æ‰€å¾—"
          (r-node s "2021.01.28"  "@3820827124" "å…³æ³¨ä¿¡æ¯æº"
                  (:li "Follow : "
                       (:ul
                        (:li "G|TV" (link s "https://gtv.org/" ))
                        (:li "GNEWS" (link s "https://gnews.org/zh-hans/"))
                        (:li "éƒ­æ–‡è´µ"
                             (link s "https://gtv.org/user/5e596957357cc612d35a8044")
                             (:small "G|TV: éƒ­æ–‡è´µMILES"))
                        (:li "è·¯å¾·"
                             (:ul
                              (:li
                               (link s "https://gtv.org/user/5e890397490f470e21d37b24")
                               (:small "G|TV: è·¯å¾·æ—¶è¯„"))
                              (:li
                               (link s "https://www.youtube.com/channel/UCm3Ysfy0iXhGbIDTNNwLqbQ/featured")
                               (:small "Youtube: è·¯å¾·ç¤¾LUDE Media")))))))
          
          (r-node s "2021.01.19-2021.03.01" "@3820050169" "CCPç—…æ¯’"
                  (:ul 
                   (:li "Know : "
                        (link s "ccp-virus.html" "CCPç—…æ¯’"))
                   (:li "See : "
                        (:ul (:li (link s "https://twitter.com/DrLiMengYAN1"
                                        "é—«ä¸½æ¢¦åšå£« Twitter: Dr. Li-Meng YAN @DrLiMengYAN1"))
                             (:li (link s "https://gnews.org/zh-hans/category/ccpvirus-cn/"
                                        "GNEWS : CCPç—…æ¯’"))
                             (:li  (link s "https://pandemic.warroom.org/"
                                         "War room : Pandemic")
                                   (:ul (:li (link s "https://gtv.org/user/5ed199be2ba3ce32911df7ac"
                                                   "ç§˜å¯†ç¿»è¯‘ç»„")
                                             (:small "(åŒ…å« ç­å†œæˆ˜æ–—å®¤ ä¸­æ–‡åŒå£°ç¿»è¯‘)"))))
                             (:li (link s "https://www.youtube.com/channel/UCJwXLE6A7WomYVlTHMHgMuQ"
                                        "ä¸Šå¤©é€ ç­ç–«ç»„")))))))))

;; (defun 3Rabbit (stream)
;;   (with-html-output (s stream :indent 2)
;;     (:div :class "topic" "3Rabbit æµ‹è¯• : å…”å­ æ‰€è¨€ æ‰€æ€ æ‰€çœ‹ æ‰€å¬ æ‰€å¾—"
;;           (r-node s "2021.01.19-2021.01.21" "@3820050169" "CCPç—…æ¯’"
;;                   (:li "Follow : "
;;                        (link s "ccp-virus.html" "CCPç—…æ¯’")))
;;           (r-node s "2021.01.12" "@3819448168" "è·¯å¾·ç¤¾"
;;                   (:li "Video : "
;;                        (link s "https://youtu.be/UoyQiZG0wjg")
;;                        (:small "Youtube:è·¯å¾·ç¤¾LUDE Media")
;;                        (:q (:pre "
;; 1/11/2021è·¯å¾·æ—¶è¯„ï¼ˆè·¯åšè‰¾å† è°ˆï¼‰ï¼š
;; ä¹ è¿‘å¹³1æœˆ11æ—¥å¼€ä¼šç…§ç‰‡è¢«æ­æ˜¯12æœˆ29æ—¥æ‰€æ‹ï¼›
;; ä¸­å…±å¨èƒè“¬ä½©æ¾³ä¸€æ—¦è®¿å°ï¼Œå°±ä¼šæ´¾æˆ˜æœºå…¥ä¾µå°æ¹¾æ„å‘³ç€ä»€ä¹ˆ..."))))
;;           (r-node s "2021.01.12" "@3819447903" "éƒ­æ–‡è´µ"
;;                   (:li "Video : "
;;                        (link s "https://gtv.org/video/id=5ffb0d22f579a75e0bcf7288")
;;                        (:small "GTV:éƒ­æ–‡è´µMILES")
;;                        (:q (:pre "2021å¹´1æœˆ10æ—¥ æ–‡è´µç›´æ’­"))))
;;           (r-node s "2021.01.06" "@3818928589" "éƒ­æ–‡è´µ"
;;                   (:li "Getter (Video) : "
;;                        (link s "https://gtv.org/getter/5ff4968787fabe2daf31075b")
;;                        (:small "GTV:éƒ­æ–‡è´µMILES")
;;                        (:q (:pre "
;; 2021å¹´1æœˆ5å·ï¼šåŒ—äº¬åœ¨è¿‡å»24å°æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåå°”è¡—ä¸ºä»€ä¹ˆå‡ºå°”åå°”â€¦â€¦å–æ¶ˆå¯¹ä¸­å…±çš„ç”µä¿¡å…¬å¸çš„åˆ¶è£ï¼Œä¸€åˆ‡éƒ½å·²ç»å¼€å§‹ï¼
;; "))))
;;           (R-NODE S "2021.01.05" "@3818929253"  "å…”è¯­"
;;                   (:LI "X tooo: "
;;                        (:Q (:PRE "
;; è¥¿æ–¹ çºµå®¹ä¸­å…±
;; ç°åœ¨ä»˜å‡ºçš„ä»£ä»·
;; æ‰¿å—çš„èµ· ?

;; ä»¥ä¸ºç¦»å¾—è¿œå°±æ²¡äº‹äº† ?

;; ç»§ç»­çºµå®¹ ç”šè‡³å›èˆ”
;; ä»£ä»·ä¼šæ¶ˆå¤± ?
;; è¿˜æ˜¯ä¸­å…±ä¼šå¿è¿˜ä»£ä»· ?

;; æ•´ä¸ªä¸–ç•Œ æ”¯ä»˜ä»£ä»·
;; å°±ä¸­å…±å’Œè¥¿æ–¹ä¸€å°éƒ¨åˆ†åˆ©ç›Šé›†å›¢Happy ?

;; è¿½é€åˆ©ç›Š å´ç®—ä¸æ¸…ä»£ä»· ğŸ˜‚
;; ä¸­å…±ä¸å‚» ä¸ä¼šç™½æ‹¿çš„

;; äººç±»å¹²è„†å°±å†è§å§
;; è¿åœ°çƒéƒ½æ²¡å‡ºå»å‘¢
;; ä¸åœåŸåœ°è½¬åœˆåœˆ è¿˜ä¹æ­¤ä¸ç–²
;; "))))
;;           (r-node s "2021.01.05" "@3818929232" "å…”è¯­"
;;                   (:li "X tooo: "
;;                        (:q (:pre "
;; å…”å­ è®¤ä¸º ä¸­å…±å®Œè›‹ æ²¡æœ‰æ‚¬å¿µ

;; å†ç»™ä¸­å…±ä¸¤å¹´ ?
;; ä½ ç»™å®ƒ å®ƒç»™ä¸ç»™ä½ å‘¢
;; æ—¥æœ¬ç‚¸çç æ¸¯
;; æ˜çŸ¥é“æ‰“ä¸äº† è¿˜æ‰“
;; ä¸æ˜¯ä¸ºèµ¢ è€Œä¸ºæ‹–æ—¶é—´ å¢åŠ å˜æ•°
;; è‹¥ç¾å›½å‘ç”Ÿäº†åˆ«çš„äº‹
;; è‡ªç„¶ç¾å®³ å†…ä¹± ç­‰
;; è€Œä¸èƒ½ç»§ç»­æˆ˜æ–— ä¹Ÿæ˜¯æœ‰å¯èƒ½çš„
;; åªæ˜¯å½“æ—¶æ²¡å‘ç”Ÿ

;; ä¸­å…±æ˜¯æœ‰ç›®çš„çš„
;; ä½ ç»™å®ƒå‡ å¹´
;; å®ƒæ›´åŠ éšå¿ è€Œâ€œåšç§¯è–„å‘â€
;; ç°åœ¨çš„ä»£ä»·éƒ½ä»˜ä¸èµ·å‘¢
;; "))))
;;           (r-node s "2021.01.04" "@3818928509" "è·¯å¾·ç¤¾"
;;                   (:li "Video: " (link s "https://youtu.be/X6wQ4zzRs7U")
;;                        (:small "Youtube:è·¯å¾·ç¤¾LUDE Media")
;;                        (:q (:pre "
;; 1/3/2021 è·¯å¾·æ—¶è¯„ï¼ˆè·¯åšè‰¾å† è°ˆï¼‰ï¼š
;; ç¾å›½å®¶å®‰å…¨å‰¯é¡¾é—®åšæ˜æ­£å¼å‘Šè¯‰è‹±å›½å®˜å‘˜ç—…æ¯’æ¥è‡ªä¸­å…±å®éªŒå®¤æ„å‘³ç€ä»€ä¹ˆï¼Ÿ
;; æ–°åç¤¾å‰¯ç¤¾é•¿ç†Šå‘æ™–ä¹‹å¥³æ€ä¹ˆè¯´ï¼Ÿ
;; æ›´å¤šè®®å‘˜å®£å¸ƒæ”¯æŒå…‹é²å…¹çš„1æœˆ6æ—¥å£°æ˜æ„å‘³ç€ä»€ä¹ˆï¼Ÿ
;; "))))
;;           (r-node s "2021.01.04" "@3818928498" "éƒ­æ–‡è´µ"
;;                   (:li "Getter (Video) : "
;;                        (link s "https://gtv.org/getter/5ff1d5fd87fabe2daf2fdc75")
;;                        (:small "GTV:éƒ­æ–‡è´µMILES")
;;                        (:q (:pre "
;; 2021å¹´1æœˆ3å·ï¼šçˆ†æ–™é©å‘½åˆä¸ºç¾å›½åšå‡ºäº†å·¨å¤§è´¡çŒ®ã€‚å”¯çœŸä¸ç ´å°±æ˜¯çˆ†æ–™é©å‘½ç™¾æˆ˜ç™¾èƒœçš„æ³•å®â€¦â€¦çˆ†æ–™é©å‘½çš„è·Ÿéšè€…å°†å¦‚æµ·å•¸èˆ¬çš„çˆ†å‘ï¼Œä¸€åˆ‡éƒ½å·²ç»å¼€å§‹ï¼
;; "))))
;;           (r-node s "2021.01.03" "@3818928487" "å…”è¯­"
;;                   (:li "X tooo: "
;;                        (:q (:pre "
;; å…”å­ æ–°å¹´é—®å€™ ğŸ˜„
;; æ„¿äººç”Ÿå¹³ç­‰ æœ›ä¼—ç”Ÿå¹³å®‰
;; å¸Œæœ›")))))))


#+END_SRC

