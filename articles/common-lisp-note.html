<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2019-02-25 Mon 18:35 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Common Lisp - 笔记整理 (草稿)</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Xt3">
<link href="/testwebsite/css/org.css" rel="stylesheet"></link>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Common Lisp - 笔记整理 (草稿)</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org469f49f">1. 准备</a></li>
<li><a href="#org7ba47ba">2. 开始</a>
<ul>
<li><a href="#org7bfa37e">2.1. 自身</a>
<ul>
<li><a href="#org03d5e1f">2.1.1. Comment 注释</a></li>
<li><a href="#orgad23d4e">2.1.2. Reader &amp; Printer 读取器 和 打印器 :?:</a></li>
<li><a href="#orgcfabb8d">2.1.3. Quote 引用</a></li>
<li><a href="#org20c54f7">2.1.4. Special 特殊操作符</a></li>
<li><a href="#orgafc9d31">2.1.5. Type System 类型系统</a></li>
<li><a href="#orgd8cec6d">2.1.6. Symbol 符号</a></li>
<li><a href="#orge4d0457">2.1.7. Name 名字</a></li>
<li><a href="#org865b1eb">2.1.8. Package</a></li>
<li><a href="#org9e2fadc">2.1.9. Assignment 赋值</a></li>
<li><a href="#org77f2d11">2.1.10. Macro 宏</a></li>
<li><a href="#orgb58cbcc">2.1.11. Feature 特性</a></li>
<li><a href="#org78b0401">2.1.12. Error :?:</a></li>
<li><a href="#org6d17e2f">2.1.13. Debug :?:</a></li>
<li><a href="#orgefa25c1">2.1.14. Help</a></li>
</ul>
</li>
<li><a href="#org62bfec1">2.2. 表示 和 操作</a></li>
</ul>
</li>
<li><a href="#orge0e0f4e">3. 表示</a>
<ul>
<li><a href="#org29b34f4">3.1. Number 数</a>
<ul>
<li><a href="#orgbc699a4">3.1.1. Rational 有理数</a></li>
<li><a href="#orgf2da0aa">3.1.2. Float 浮点数</a></li>
<li><a href="#org8aedbca">3.1.3. Complex 复数</a></li>
</ul>
</li>
<li><a href="#org08b47ea">3.2. Character 字符</a></li>
<li><a href="#orgc3ce72f">3.3. String 字符串</a>
<ul>
<li><a href="#orged0f03a">3.3.1. GET</a></li>
<li><a href="#org808f4ea">3.3.2. Split &amp; Concat &amp; Join &amp; Trim</a></li>
<li><a href="#orgf4aa4c5">3.3.3. Search &amp; Replace</a></li>
<li><a href="#org706fca5">3.3.4. Compare</a></li>
<li><a href="#orgbb6e0f8">3.3.5. Regex</a></li>
<li><a href="#org855039a">3.3.6. Coding</a></li>
<li><a href="#org3e5f2a5">3.3.7. Other</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgab059b7">4. 基础</a>
<ul>
<li><a href="#orgab79f52">4.1. 变量 和 常量</a></li>
<li><a href="#orgef41884">4.2. 函数</a>
<ul>
<li><a href="#org65bcb6e">4.2.1. Call</a></li>
<li><a href="#org8c9378c">4.2.2. Paramater list</a></li>
<li><a href="#orga77c479">4.2.3. Return Value</a></li>
<li><a href="#org4313bf9">4.2.4. Closures</a></li>
</ul>
</li>
<li><a href="#org08b3465">4.3. 控制流</a></li>
</ul>
</li>
<li><a href="#org60bb998">5. 概念</a>
<ul>
<li><a href="#org4adaf2a">5.1. Scope &amp; Extent 作用域 和 生命周期</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-org469f49f" class="outline-2">
<h2 id="org469f49f"><span class="section-number-2">1</span> 准备</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>实现
<ul class="org-ul">
<li>CCL</li>
<li>SBCL</li>
</ul></li>
<li>编辑器 : Emacs
<ul class="org-ul">
<li>Slime</li>
<li>lispy</li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-org7ba47ba" class="outline-2">
<h2 id="org7ba47ba"><span class="section-number-2">2</span> 开始</h2>
<div class="outline-text-2" id="text-2">
<p>
Live 活着的
</p>
<ul class="org-ul">
<li>交互能力 实时修改 快速反馈</li>
<li>REPL : 读 求值 打印 循环</li>
</ul>
</div>

<div id="outline-container-org7bfa37e" class="outline-3">
<h3 id="org7bfa37e"><span class="section-number-3">2.1</span> 自身</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>语法 : S-表达式
<ul class="org-ul">
<li>原子 (列表以外的)</li>
<li>列表 (括号括起来的)</li>
</ul></li>
<li>求值
<ul class="org-ul">
<li>atom =&gt; self (自求值 : 返回自身)
<ul class="org-ul">
<li>Symbol =&gt; value  (: 符号引用对象)
<ul class="org-ul">
<li>t nil :keyword =&gt; self</li>
</ul></li>
</ul></li>
<li>list (根据第一个元素)
<ul class="org-ul">
<li>function 函数 : 参数从左到右先求值 再传入函数求值</li>
<li>special 特殊形式 : 各自特定的规则
<ul class="org-ul">
<li>不求值 : quote</li>
</ul></li>
<li>macro 宏 : 参数不求值</li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="outline-container-org03d5e1f" class="outline-4">
<h4 id="org03d5e1f"><span class="section-number-4">2.1.1</span> Comment 注释</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;;; </span><span style="color: #8B8989; font-style: italic;">File header</span>

<span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Paragraph</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>x<span style="color: #006400;">)</span>
  <span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Follow multiple lines</span>
  <span style="color: #006400;">(</span>bar<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>ted i<span style="color: #006400;">)</span>                             <span style="color: #8B8989; font-style: italic;">; Current line</span>
  <span style="color: #006400;">(</span>baz<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">#| </span><span style="color: #8B8989; font-style: italic;">Multiple lines</span>
<span style="color: #8B8989; font-style: italic;">    #|</span>
<span style="color: #8B8989; font-style: italic;">       Nested</span>
<span style="color: #8B8989; font-style: italic;">    |#</span>
<span style="color: #8B8989; font-style: italic;">|#</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgad23d4e" class="outline-4">
<h4 id="orgad23d4e"><span class="section-number-4">2.1.2</span> Reader &amp; Printer 读取器 和 打印器 :?:</h4>
</div>
<div id="outline-container-orgcfabb8d" class="outline-4">
<h4 id="orgcfabb8d"><span class="section-number-4">2.1.3</span> Quote 引用</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li>Homoiconicity 同象性 : 程序 &amp; 数据</li>
<li>引用 : quote (sugar: ')
<ul class="org-ul">
<li>符号作为数据 : 'foo</li>
<li>程序(列表)作为数据 : '(+ 1 2)</li>
<li><p>
Ex.
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(quote ...) == '(...)</span>
'<span style="color: #8b0000;">(</span>x y z<span style="color: #8b0000;">)</span>                  <span style="color: #8B8989; font-style: italic;">;-&gt; (X Y Z)</span>
<span style="color: #8b0000;">(</span>quote x<span style="color: #8b0000;">)</span>                 <span style="color: #8B8989; font-style: italic;">;-&gt; X</span>
<span style="color: #8b0000;">(</span>list 'quote 1<span style="color: #8b0000;">)</span>           <span style="color: #8B8989; font-style: italic;">;-&gt; '1  ;== (quote 1)</span>
<span style="color: #8b0000;">(</span>list 'quote 'y<span style="color: #8b0000;">)</span>          <span style="color: #8B8989; font-style: italic;">;-&gt; 'Y</span>
</pre>
</div></li>
</ul></li>
<li>反引用
<ul class="org-ul">
<li><p>
backquote (sugar: `)
</p>
<div class="org-src-container">
<pre class="src src-lisp">`<span style="color: #8b0000;">(</span>x <span style="color: #006400;">(</span>+ 3 3<span style="color: #006400;">)</span> y<span style="color: #8b0000;">)</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; (X (+ 3 3) Y)</span>
`<span style="color: #8b0000;">(</span>x ,<span style="color: #006400;">(</span>+ 3 3<span style="color: #006400;">)</span> y<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (X 6 Y)</span>
`<span style="color: #8b0000;">(</span>x <span style="color: #006400;">(</span>x y z<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>    <span style="color: #8B8989; font-style: italic;">;-&gt; (X (X Y Z))</span>
`<span style="color: #8b0000;">(</span>x ,@'<span style="color: #006400;">(</span>x y z<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (X X Y Z)</span>
`<span style="color: #8b0000;">(</span>x . ,'<span style="color: #006400;">(</span>x y z<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (X X Y Z)</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org20c54f7" class="outline-4">
<h4 id="org20c54f7"><span class="section-number-4">2.1.4</span> Special 特殊操作符</h4>
<div class="outline-text-4" id="text-2-1-4">
<ul class="org-ul">
<li>25个</li>
<li>词法环境 : let let* setq progv</li>
<li>函数 : function labels flet</li>
<li>宏 : macrolet symbol-macrolet</li>
<li>控制流
<ul class="org-ul">
<li>if</li>
<li>progn</li>
<li>block return-from return</li>
<li>tagbody go</li>
<li>catch throw</li>
<li>unwind-protect</li>
</ul></li>
<li>多值 : multiple-value-call multiple-value-prog1</li>
<li>求值 : quote eval-when load-time-value
<ul class="org-ul">
<li>load-time-value : 若编译则只求值一次</li>
</ul></li>
<li>类型 : locally the</li>
</ul>
</div>
</div>
<div id="outline-container-orgafc9d31" class="outline-4">
<h4 id="orgafc9d31"><span class="section-number-4">2.1.5</span> Type System 类型系统</h4>
<div class="outline-text-4" id="text-2-1-5">
<ul class="org-ul">
<li>动态类型 : 运行时检测 名字 可关联 任何类型的对象</li>
<li>强类型 : 所有的类型错误都会被检测</li>
<li>Class 可作为 Type 使用 (相反不可) : 定义 class 时 会自动定义一个同名的 Type</li>
<li>名字(变量)没有类型  只有值才有类型</li>
</ul>

<p>
操作
</p>
<ul class="org-ul">
<li>Case : typecass ctypecase etypecase</li>
<li><p>
Determining : type-of
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>type-of 'x<span style="color: #8b0000;">)</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; SYMBOl</span>
<span style="color: #8b0000;">(</span>type-of '<span style="color: #006400;">(</span>+ 1<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; CONS</span>
<span style="color: #8b0000;">(</span>type-of nil<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; NULL</span>
</pre>
</div></li>
<li><p>
Check : check-type typep
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">my-sqrt</span> <span style="color: #006400;">(</span>x<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #ff69b4;">check-type</span> x <span style="color: #ff1493;">(</span>real 0<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> 
  <span style="color: #006400;">(</span>sqrt x<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  
<span style="color: #8b0000;">(</span>my-sqrt -9<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Error: TYPE-ERROR</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">my-sqrt</span> <span style="color: #006400;">(</span>list<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #ff69b4;">check-type</span> <span style="color: #ff1493;">(</span>first list<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>real 0<span style="color: #ff1493;">)</span> <span style="color: #61CE3C;">"a non-negative real number"</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>sqrt <span style="color: #ff1493;">(</span>first list<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
</ul>
</div>

<ol class="org-ol"><li><a id="orge2582c4"></a>Type Specifier 类型标识符 :?:<br></li></ol>
</div>
<div id="outline-container-orgd8cec6d" class="outline-4">
<h4 id="orgd8cec6d"><span class="section-number-4">2.1.6</span> Symbol 符号</h4>
<div class="outline-text-4" id="text-2-1-6">
<ul class="org-ul">
<li>符号的内部结构
<ul class="org-ul">
<li>name     : symbol-name</li>
<li>package  : symbol-package := home package | nil(uninterned)</li>
<li>value    : symbol-value</li>
<li>function : symbol-function</li>
<li><p>
plist    : symbol-plist
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>setf <span style="color: #006400;">(</span>get 'a 'ss<span style="color: #006400;">)</span> 1<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>symbol-plist 'a<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; (SS 1)</span>
<span style="color: #8b0000;">(</span>get 'a 'ss<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
</pre>
</div></li>
</ul></li>
<li>命名
<ul class="org-ul">
<li>大小写不敏感 保持大小写使用"||"包围</li>
<li>不能
<ul class="org-ul">
<li>只有: 数字 或 "."</li>
<li>含有: Whitespace [()"'`,:;\|]</li>
</ul></li>
<li>使用不被允许的字符
<ul class="org-ul">
<li>Escape : \</li>
<li><p>
Surrounding : ||
</p>
<div class="org-src-container">
<pre class="src src-lisp">|lisp 3|
| | 
|abc|      
</pre>
</div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orge4d0457" class="outline-4">
<h4 id="orge4d0457"><span class="section-number-4">2.1.7</span> Name 名字</h4>
<div class="outline-text-4" id="text-2-1-7">
<ul class="org-ul">
<li>基于: 符号</li>
<li>约定
<ul class="org-ul">
<li>全局变量 : <b>name</b></li>
<li>常量 : <del>name</del></li>
<li>特别低层的函数 : 前缀 %|%%</li>
<li>分隔名字 : -</li>
<li>谓词 : 后缀 p|-p</li>
</ul></li>
<li><p>
函数和变量 使用不同 名称空间
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">fn</span> <span style="color: #006400;">()</span> 2<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">fn</span> 1<span style="color: #8b0000;">)</span>
fn <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
<span style="color: #8b0000;">(</span>fn<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 2</span>
#'fn <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Compiled-function FN #x3020033714EF&gt;</span>

<span style="color: #8b0000;">(</span>symbol-value 'fn<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
<span style="color: #8b0000;">(</span>symbol-function 'fn<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Compiled-function FN #x3020033714EF&gt;</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org865b1eb" class="outline-4">
<h4 id="org865b1eb"><span class="section-number-4">2.1.8</span> Package</h4>
<div class="outline-text-4" id="text-2-1-8">
<ul class="org-ul">
<li>包 : 符号的集合 用于名称空间</li>
<li><p>
创建 : make-package defpackage
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(make-package name &amp;key nicknames use)</span>
<span style="color: #8b0000;">(</span>make-package <span style="color: #4c83ff;">:package-test</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "PACKAGE-TEST"&gt;</span>
<span style="color: #8b0000;">(</span>make-package #<span style="color: #4c83ff;">:package-test</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "PACKAGE-TEST"&gt;</span>
<span style="color: #8b0000;">(</span>make-package 'package-test<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "PACKAGE-TEST"&gt;</span>
<span style="color: #8b0000;">(</span>make-package <span style="color: #61CE3C;">"package-test"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "package-test"&gt;</span>
<span style="color: #8b0000;">(</span>make-package '|package-test|<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "package-test"&gt;</span>

<span style="color: #8b0000;">(</span>make-package <span style="color: #4c83ff;">:my-package</span> <span style="color: #4c83ff;">:nicknames</span> '<span style="color: #006400;">(</span><span style="color: #4c83ff;">:myp</span> <span style="color: #61CE3C;">"myp"</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>make-package <span style="color: #61CE3C;">"my-package"</span> <span style="color: #4c83ff;">:use</span> '<span style="color: #006400;">(</span><span style="color: #4c83ff;">:cl</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(defpackage ...)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defpackage</span> <span style="color: #afd8af;">:my-package</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:nicknames</span> <span style="color: #4c83ff;">:myp</span> <span style="color: #61CE3C;">"my-pkg"</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:use</span> <span style="color: #4c83ff;">:cl</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:shadow</span> #<span style="color: #4c83ff;">:car</span> #<span style="color: #4c83ff;">:cdr</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:shadowing-import-from</span> <span style="color: #4c83ff;">:cl</span> #<span style="color: #4c83ff;">:cons</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:import-from</span> <span style="color: #4c83ff;">:pkgname</span> #<span style="color: #4c83ff;">:bye</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:intern</span> #<span style="color: #4c83ff;">:hi</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">:export</span> #<span style="color: #4c83ff;">:egg</span> #<span style="color: #4c83ff;">:milk</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
删除 : delete-package
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>delete-package <span style="color: #4c83ff;">:my-pkg</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
改变当前包 : in-package 
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">in-package</span> <span style="color: #4c83ff;">:my-pkg</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
重命名 : rename-package
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(rename-package :oldname :newname '(:nickname))</span>
<span style="color: #8b0000;">(</span>make-package <span style="color: #4c83ff;">:temp</span> <span style="color: #4c83ff;">:nicknames</span> '<span style="color: #006400;">(</span><span style="color: #4c83ff;">:tp</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>rename-package <span style="color: #4c83ff;">:temp</span> <span style="color: #4c83ff;">:temps</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  #&lt;PACKAGE "TEMPS"&gt;</span>
<span style="color: #8b0000;">(</span>package-name <span style="color: #4c83ff;">:temp</span><span style="color: #8b0000;">)</span>          <span style="color: #8B8989; font-style: italic;">;-&gt; There is no package named "TEMP" .</span>
<span style="color: #8b0000;">(</span>package-nicknames <span style="color: #4c83ff;">:temps</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  ()</span>
</pre>
</div></li>
<li><p>
Use | Import | Export 
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">use-package : inherit all external symbol</span>
<span style="color: #8b0000;">(</span>use-package <span style="color: #4c83ff;">:cl</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>use-package <span style="color: #4c83ff;">:cl</span> <span style="color: #4c83ff;">:temp</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">in TEMP use CL</span>
<span style="color: #8b0000;">(</span>unuse-package <span style="color: #4c83ff;">:cl</span><span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">import : add symbol to internal of package</span>
<span style="color: #8b0000;">(</span>import 'cl:car <span style="color: #006400;">(</span>make-package <span style="color: #4c83ff;">:temp</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">shadowing-import</span>
<span style="color: #8b0000;">(</span>shadowing-import 'cl::car <span style="color: #4c83ff;">:temp</span><span style="color: #8b0000;">)</span> 

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">export | unexport</span>
<span style="color: #8b0000;">(</span>export 'temp::temp-sym <span style="color: #4c83ff;">:temp</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>unexport 'temp::temp-sym <span style="color: #4c83ff;">:temp</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
Intern : intern unintern
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">intern : enter symbol named string into package</span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"Never-Before"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  |Never-Before|, NIL</span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"Never-Before"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  |Never-Before|, :INTERNAL </span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"NEVER-BEFORE"</span> <span style="color: #61CE3C;">"KEYWORD"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  :NEVER-BEFORE, NIL</span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"NEVER-BEFORE"</span> <span style="color: #61CE3C;">"KEYWORD"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  :NEVER-BEFORE, :EXTERNAL</span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"AAAA"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; AAAA</span>
<span style="color: #8b0000;">(</span>intern <span style="color: #61CE3C;">"aaa"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; |aaa|</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">unintern</span>
<span style="color: #8b0000;">(</span>unintern <span style="color: #61CE3C;">"Never-Before"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; T</span>
<span style="color: #8b0000;">(</span>find-symbol <span style="color: #61CE3C;">"Never-Before"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; NIL, NIL </span>
</pre>
</div></li>
<li><p>
屏蔽符号 : shadow
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#23631;&#34109;&#22312;&#24403;&#21069;&#21253;</span>
<span style="color: #8b0000;">(</span>shadow 'sym<span style="color: #8b0000;">)</span> 

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#23631;&#34109;&#20854;&#23427;&#21253;&#20013;&#23548;&#20837;&#30340; </span>
<span style="color: #8b0000;">(</span>shadow 'pkg:sym<span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#22312;:pkg&#21253;&#20013;&#23631;&#34109;&#31526;&#21495;</span>
<span style="color: #8b0000;">(</span>shadow 'sym <span style="color: #4c83ff;">:pkg</span><span style="color: #8b0000;">)</span>  
</pre>
</div></li>
<li><p>
包信息 : <b>package</b> list-all-packages find-package package-[name nicknames]
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Packge</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Name</span>
<span style="color: #8b0000;">(</span>package-name <span style="color: #4c83ff;">:cl</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "COMMON-LISP"</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Nickname </span>
<span style="color: #8b0000;">(</span>package-nicknames <span style="color: #4c83ff;">:common-lisp</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ("CL")</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">All registered package</span>
<span style="color: #8b0000;">(</span>list-all-packages<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Current-pkg </span>
<span style="color: #8b0000;">(</span>print *package*<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">find-package</span>
<span style="color: #8b0000;">(</span>find-package <span style="color: #4c83ff;">:cl</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;PACKAGE "COMMON-LISP"&gt;</span>
</pre>
</div></li>
<li><p>
包与包关系 : package-[use used-by]-lisp
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Use | Used package</span>
<span style="color: #8b0000;">(</span>make-package <span style="color: #4c83ff;">:new-pkg</span> <span style="color: #4c83ff;">:use</span> '<span style="color: #006400;">(</span><span style="color: #4c83ff;">:my-pkg</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>package-use-list <span style="color: #4c83ff;">:new-pkg</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (#&lt;Package "MY-PKG"&gt;)</span>
<span style="color: #8b0000;">(</span>package-used-by-list <span style="color: #4c83ff;">:my-pkg</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (#&lt;Package "NEW-PKG"&gt;)</span>
</pre>
</div></li>
<li><p>
包内符号
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Symbol</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(find-symbol string &amp;optional package)</span>
<span style="color: #8b0000;">(</span>find-symbol <span style="color: #61CE3C;">"CAR"</span> <span style="color: #4c83ff;">:cl-user</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; CAR, :INHERITED</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">find-all-symbols : searche every registered package</span>
<span style="color: #8b0000;">(</span>find-all-symbols '+<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (:+ + XT3.OOP::+)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Symbol in package</span>
<span style="color: #8b0000;">(</span>symbol-package 'car<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Package "COMMON-LISP"&gt;</span>
<span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">package-shadowing-symbols</span>
<span style="color: #8b0000;">(</span>package-shadowing-symbols <span style="color: #006400;">(</span>make-package <span style="color: #4c83ff;">:temp</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ()</span>
</pre>
</div></li>
<li><p>
迭代包内符号 : loop do-[all external]-symbols
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">List all Symbol in Package</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">loop</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">loop</span> for s
   being each external-symbol|symbol|present-symbol of <span style="color: #4c83ff;">:cl</span>
   count s<span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">do-symbols</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">do-symbols</span> <span style="color: #006400;">(</span>s <span style="color: #ff1493;">(</span>find-package <span style="color: #4c83ff;">:cl-user</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>print s<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">do-external-symbols</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">do-external-symbols</span> <span style="color: #006400;">(</span>s <span style="color: #ff1493;">(</span>find-package <span style="color: #4c83ff;">:cl-user</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>print s<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">do-all-symbols : iterates on every registered package</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>lst <span style="color: #ffff00;">()</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>                                                     
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">do-all-symbols</span> <span style="color: #ff1493;">(</span>s lst<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span><span style="color: #4c83ff;">when</span> <span style="color: #ffff00;">(</span>eq <span style="color: #00ff00;">(</span>find-package <span style="color: #4c83ff;">:temp</span><span style="color: #00ff00;">)</span> <span style="color: #00ff00;">(</span>symbol-package s<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span>
      <span style="color: #ffff00;">(</span>push s lst<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  lst<span style="color: #8b0000;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-org9e2fadc" class="outline-4">
<h4 id="org9e2fadc"><span class="section-number-4">2.1.9</span> Assignment 赋值</h4>
<div class="outline-text-4" id="text-2-1-9">
<ul class="org-ul">
<li><p>
setf : (setf name|place value)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>setf *x* <span style="color: #006400;">(</span>list 1 2 3<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>n 3<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setf n 33<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Place</span>
<span style="color: #8b0000;">(</span>setf <span style="color: #006400;">(</span>car *x*<span style="color: #006400;">)</span> 9<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">*x* = (9 2 3)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#22810;&#20010;&#36171;&#20540;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 1<span style="color: #ff1493;">)</span>
      <span style="color: #ff1493;">(</span>b 2<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setf a 5
        b a<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; (5 5)</span>
</pre>
</div></li>
<li><p>
setq psetq(平行) : (setq name value)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 1<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>b 2<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>setq a 3 b <span style="color: #ff1493;">(</span>+ a 1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; (3 4)</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 1<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>b 2<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>psetq a b b a<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; (2 1)</span>
</pre>
</div></li>
<li><p>
set : (set symbol value)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>set 'x 1<span style="color: #8b0000;">)</span>
x <span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 3<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>set 'a 1<span style="color: #006400;">)</span>
  a<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 3</span>
</pre>
</div></li>
<li><p>
multiple-value-setq
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span>a b c<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>multiple-value-setq <span style="color: #ff1493;">(</span>a b c<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>values 1 2<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list a b c<span style="color: #006400;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 NIL)</span>
  <span style="color: #006400;">(</span>multiple-value-setq <span style="color: #ff1493;">(</span>a b<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>values 4 5 6<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list a b c<span style="color: #006400;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (4 5 NIL)</span>
  <span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
rotatef shiftf  (修改宏 参数只求值一次)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>setf a 0<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>setf b 1<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>rotatef a b<span style="color: #8b0000;">)</span>
a <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
b <span style="color: #8B8989; font-style: italic;">;-&gt; 0</span>

<span style="color: #8b0000;">(</span>shiftf a b 10<span style="color: #8b0000;">)</span>
a <span style="color: #8B8989; font-style: italic;">;-&gt; 0 </span>
b <span style="color: #8B8989; font-style: italic;">;-&gt; 10</span>
</pre>
</div></li>
</ul>
</div>

<ol class="org-ol"><li><a id="orga19ccbe"></a>Setf Place<br><div class="outline-text-5" id="text-2-1-9-1">
<ul class="org-ul">
<li><p>
定义 : (setf name) | defsetf | define-setf-expander
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">(setf name) </span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#23450;&#20041; : (defun (setf name) (new-val obj))</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-| Can #'(setf name)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#35843;&#29992; : (setf (name obj) new-val)</span>
</pre>
</div></li>
</ul>
</div></li></ol>
</div>

<div id="outline-container-org77f2d11" class="outline-4">
<h4 id="org77f2d11"><span class="section-number-4">2.1.10</span> Macro 宏</h4>
<div class="outline-text-4" id="text-2-1-10">
<ul class="org-ul">
<li><p>
定义 : defmacro
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defmacro</span> <span style="color: #ff1493;">name</span> <span style="color: #006400;">(</span>parameter*<span style="color: #006400;">)</span>
  <span style="color: #FBDE2D;">"Optional doc string"</span>
  body-form*<span style="color: #8b0000;">)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&amp;body : &#19982;&amp;rest&#31561;&#20215; &#20294;&#35768;&#22810;&#24320;&#21457;&#29615;&#22659;&#20250;&#26681;&#25454;&#20854;&#20462;&#25913;&#23439;&#32553;&#36827;</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&amp;whole</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defmacro</span> <span style="color: #ff1493;">tfun</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;whole</span> form <span style="color: #afd8af;">&amp;rest</span> body<span style="color: #006400;">)</span> `<span style="color: #006400;">(</span>list ',form ,@body<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>tfun 1 2 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ((TFUN 1 2 3) 1 2 3)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Destructuring parameter list &#35299;&#26500;&#24418;&#21442;&#21015;&#34920;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defmacro</span> <span style="color: #ff1493;">macro</span> <span style="color: #006400;">(</span>vars <span style="color: #afd8af;">&amp;body</span> body<span style="color: #006400;">)</span> ...<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defmacro</span> <span style="color: #ff1493;">macro</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a b c<span style="color: #ff1493;">)</span> <span style="color: #afd8af;">&amp;body</span> body<span style="color: #006400;">)</span> ...<span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li>展开 : macroexpand-1(一层) macroexpand</li>
<li>!! 注意
<ul class="org-ul">
<li>多重求值问题</li>
<li>变量定义顺序</li>
<li>重名 (gensym)</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgb58cbcc" class="outline-4">
<h4 id="orgb58cbcc"><span class="section-number-4">2.1.11</span> Feature 特性</h4>
<div class="outline-text-4" id="text-2-1-11">
<ul class="org-ul">
<li>用于区分运行环境</li>
</ul>
<div class="org-src-container">
<pre class="src src-lisp">*features*

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">#+|- | #+|-(and|or|not ..)</span>

<span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">a in impl A, b in impl B</span>
<span style="color: #8b0000;">(</span>cons <span style="color: #8B8989; font-style: italic;">#+a "more"</span> #-b <span style="color: #61CE3C;">"little"</span> x<span style="color: #8b0000;">)</span> 
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">in impl A ;-&gt; (cons "more" x)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">in impl B ;-&gt; (cons "little" x)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org78b0401" class="outline-4">
<h4 id="org78b0401"><span class="section-number-4">2.1.12</span> Error :?:</h4>
</div>

<div id="outline-container-org6d17e2f" class="outline-4">
<h4 id="org6d17e2f"><span class="section-number-4">2.1.13</span> Debug :?:</h4>
</div>
<div id="outline-container-orgefa25c1" class="outline-4">
<h4 id="orgefa25c1"><span class="section-number-4">2.1.14</span> Help</h4>
<div class="outline-text-4" id="text-2-1-14">
<ul class="org-ul">
<li><p>
apropos
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">opt second argument : limit search in particular package</span>
<span style="color: #8b0000;">(</span>apropos <span style="color: #61CE3C;">"MAP"</span> <span style="color: #4c83ff;">:cl</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">..-&gt; MAPC, Def: FUNCTION</span>
</pre>
</div></li>
<li><p>
describe
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>describe 'length<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Symbol: LENGTH</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Function</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; EXTERNAL in package: #&lt;Package "COMMON-LISP"&gt;</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Print name: "LENGTH"</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Value: #&lt;Unbound&gt;</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Function: #&lt;Compiled-function LENGTH #x34C39B6&gt;</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Arglist: (SEQUENCE)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Plist: (:ANSI-CL-URL "fun_length.html")</span>

<span style="color: #8b0000;">(</span>describe <span style="color: #61CE3C;">"LENGTH"</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; "LENGTH"</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Type: (SIMPLE-BASE-STRING 6)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Class: #&lt;BUILT-IN-CLASS SIMPLE-BASE-STRING&gt;</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Length: 6</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 0: #\L</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1: #\E</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 2: #\N</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 3: #\G</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 4: #\T</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 5: #\H</span>

<span style="color: #8b0000;">(</span>describe 3<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Fixnum: 3</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Scientific: 3.00E+0</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Log base 2: 1.5849625</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Binary: #b11</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Octal: #o3</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Decimal: 3.</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Hex: #x3</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Roman: III</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Character: #\ETX</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; Abbreviated: 3</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; As time: 8:00:03 Monday, 1 January, 1900</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; MOST-POSITIVE-FIXNUM: 1152921504606846975.</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ; No value</span>
</pre>
</div></li>
<li><p>
inspect : 交互型describe 
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">*thing*</span>
              <span style="color: #006400;">(</span>vector <span style="color: #4c83ff;">:lp</span> <span style="color: #ff1493;">(</span>list 20 <span style="color: #61CE3C;">"Hotels"</span><span style="color: #ff1493;">)</span> 1971<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>inspect *thing*<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-:</span>
1 <span style="color: #8B8989; font-style: italic;">;: go one level deeper</span>
<span style="color: #8b0000;">(</span>list $ $$<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;: $ $$ $$$ work like * </span>
<span style="color: #8b0000;">(</span>setf <span style="color: #006400;">(</span>first $<span style="color: #006400;">)</span> 200<span style="color: #8b0000;">)</span>
<span style="color: #4c83ff;">:s</span> 0 #\M  <span style="color: #8B8989; font-style: italic;">;: :s setf</span>
<span style="color: #4c83ff;">:q</span>
</pre>
</div></li>
<li><p>
documentation
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>documentation 'length 'function<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; "returns the number of elements in sequence."</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">docstring</span> <span style="color: #006400;">()</span>
  <span style="color: #FBDE2D;">"This is docstring."</span>
  t<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>documentation 'docstring 'function<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; "This is docstring."</span>
</pre>
</div>
<ul class="org-ul">
<li>second argument
<ul class="org-ul">
<li>'variable : defvar, defparameter, defconstant</li>
<li>'function : defun, defmacro, special form</li>
<li>'structure : defstruct</li>
<li>'type : deftype</li>
<li>'setf : defsetf</li>
<li>'compiler-macro : define-compiler-macro</li>
<li>'method-combination : define-method-combination</li>
<li>t : returned depends upon type of first argument.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org62bfec1" class="outline-3">
<h3 id="org62bfec1"><span class="section-number-3">2.2</span> 表示 和 操作</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>表示
<ul class="org-ul">
<li>数字 : 1 -1 3.14159 3/2 #b1001 #o777 #xAC53
<ul class="org-ul">
<li>12345678901012345678902012345678903012345678901</li>
</ul></li>
<li>字符串 : "我们彼此看着对方" "Hello World"
<ul class="org-ul">
<li>字符 : ##\云  (编码: ASCII Unicode UTF-8)</li>
<li>"Hello" == #(#####)</li>
</ul></li>
<li>真值 : t nil
<ul class="org-ul">
<li>非nil 都为真</li>
</ul></li>
<li>名字(变量) : 关联一个对象
<ul class="org-ul">
<li>比起使用变量这个术语 我更喜欢用名字或标签</li>
<li>变量和常量 : 可不可以修改 名字与对象的关联 (是否可以把名字用到别的对象上)</li>
<li>符号</li>
</ul></li>
<li>过程 : 函数
<ul class="org-ul">
<li>匿名函数(深藏功与名) : lambda</li>
<li>关联一个名字 : defun</li>
<li>返回值</li>
</ul></li>
<li>控制流程 : 顺序 条件分支if cond 循环</li>
<li>复杂对象 : list array hash-table structure class(CLOS)</li>
</ul></li>
<li>操作
<ul class="org-ul">
<li>数学计算 : + - * / sin</li>
<li>等等</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge0e0f4e" class="outline-2">
<h2 id="orge0e0f4e"><span class="section-number-2">3</span> 表示</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-org29b34f4" class="outline-3">
<h3 id="org29b34f4"><span class="section-number-3">3.1</span> Number 数</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-orgbc699a4" class="outline-4">
<h4 id="orgbc699a4"><span class="section-number-4">3.1.1</span> Rational 有理数</h4>
<div class="outline-text-4" id="text-3-1-1">
<ul class="org-ul">
<li><p>
Literal
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Integer</span>
123         <span style="color: #8B8989; font-style: italic;">;-&gt; 123</span>
-123        <span style="color: #8B8989; font-style: italic;">;-&gt; -123</span>
1.          <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
15511210043330985984000000 <span style="color: #8B8989; font-style: italic;">; probably a bignum</span>

#b100       <span style="color: #8B8989; font-style: italic;">;-&gt; 4</span>
#o777       <span style="color: #8B8989; font-style: italic;">;-&gt; 511</span>
#xD         <span style="color: #8B8989; font-style: italic;">;-&gt; 13</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">#nr : base 2~36</span>
#36rABC     <span style="color: #8B8989; font-style: italic;">;-&gt; 13368 </span>
  

<span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Ratio</span>
3/7         <span style="color: #8B8989; font-style: italic;">;-&gt; 3/7</span>
4/6         <span style="color: #8B8989; font-style: italic;">;-&gt; 2/3</span>
6/3         <span style="color: #8B8989; font-style: italic;">;-&gt; 2</span>
#b1010/1011 <span style="color: #8B8989; font-style: italic;">;-&gt; 10/11  </span>
</pre>
</div></li>
</ul>
</div>


<ol class="org-ol"><li><a id="org0a914ed"></a>Integer 整数<br><div class="outline-text-5" id="text-3-1-1-1">
<ul class="org-ul">
<li><p>
类型 : fixnum bignum
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>typep 1 'fixnum<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; t</span>
<span style="color: #8b0000;">(</span>typep <span style="color: #006400;">(</span>1+ most-positive-fixnum<span style="color: #006400;">)</span> 'bignum<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; t</span>
</pre>
</div></li>
<li>整数大小无限制 : 内部会自动在必要时分配存储 从而转换到大数表示</li>
<li><p>
fixnum范围
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>list most-positive-fixnum
      most-negative-fixnum<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">( 1152921504606846975</span>
<span style="color: #8B8989; font-style: italic;">;;  </span><span style="color: #8B8989; font-style: italic;">-1152921504606846976)</span>

<span style="color: #8b0000;">(</span>expt 2 60<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1152921504606846976</span>
<span style="color: #8b0000;">(</span>expt 2 61<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 2305843009213693952</span>
</pre>
</div></li>
</ul>
</div></li>

<li><a id="org9a5bdd6"></a>Ratio 比值<br><div class="outline-text-5" id="text-3-1-1-2">
<ul class="org-ul">
<li>Rational canonicalization 规约化 : 6/3 -&gt; 2, 12/6 -&gt; 4/3</li>
<li><p>
GET : numerator denominator
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>numerator 3/5<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span>denominator 3/5<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 5</span>
</pre>
</div></li>
</ul>
</div></li></ol>
</div>

<div id="outline-container-orgf2da0aa" class="outline-4">
<h4 id="orgf2da0aa"><span class="section-number-4">3.1.2</span> Float 浮点数</h4>
<div class="outline-text-4" id="text-3-1-2">
<ul class="org-ul">
<li>实现依赖 [CCL]</li>
<li>类型 (precisions, sizes) :  s(short) f(float) d(double) l(long)</li>
<li><p>
Literal
</p>
<div class="org-src-container">
<pre class="src src-lisp">1.0      <span style="color: #8B8989; font-style: italic;">;-&gt; 1.0</span>
1e0 1s0 1f0      <span style="color: #8B8989; font-style: italic;">;-&gt; 1.0</span>
1d0      <span style="color: #8B8989; font-style: italic;">;-&gt; 1.0d0</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">float</span>
0.123    <span style="color: #8B8989; font-style: italic;">;-&gt; 0.123</span>
.123     <span style="color: #8B8989; font-style: italic;">;-&gt; 0.123</span>
123e-3   <span style="color: #8B8989; font-style: italic;">;-&gt; 0.123</span>
123E-3   <span style="color: #8B8989; font-style: italic;">;-&gt; 0.123</span>
0.123e20 <span style="color: #8B8989; font-style: italic;">;-&gt; 1.23e+19</span>
1.33232332329032 <span style="color: #8B8989; font-style: italic;">;-&gt; 1.3323233</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">doble</span>
123d23   <span style="color: #8B8989; font-style: italic;">;-&gt; 1.23d+25</span>
1.33232332329032d0 <span style="color: #8B8989; font-style: italic;">;-&gt; 1.33232332329032D0</span>

2.0/3    <span style="color: #8B8989; font-style: italic;">; Error: 2.0/3 &#34987;&#24403;&#20316;&#19968;&#20010; symbol name</span>
2/3.0    <span style="color: #8B8989; font-style: italic;">;-&gt; 0.6666667</span>
</pre>
</div></li>
<li><p>
范围 (格式:m-s-f) : most-[positive|negative]-long-float
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>list most-negative-short-float
      most-positive-short-float
      most-negative-single-float
      most-positive-single-float
      most-negative-double-float
      most-positive-double-float
      most-negative-long-float
      most-positive-long-float<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(-3.4028235E+38 3.4028235E+38</span>
<span style="color: #8B8989; font-style: italic;">;;  </span><span style="color: #8B8989; font-style: italic;">-3.4028235E+38 3.4028235E+38</span>
<span style="color: #8B8989; font-style: italic;">;;  </span><span style="color: #8B8989; font-style: italic;">-1.7976931348623157D+308 1.7976931348623157D+308</span>
<span style="color: #8B8989; font-style: italic;">;;  </span><span style="color: #8B8989; font-style: italic;">-1.7976931348623157D+308 1.7976931348623157D+308)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org8aedbca" class="outline-4">
<h4 id="org8aedbca"><span class="section-number-4">3.1.3</span> Complex 复数</h4>
<div class="outline-text-4" id="text-3-1-3">
<ul class="org-ul">
<li><p>
Literal
</p>
<div class="org-src-container">
<pre class="src src-lisp">#c<span style="color: #8b0000;">(</span>2 1<span style="color: #8b0000;">)</span>       <span style="color: #8B8989; font-style: italic;">;-&gt; #c(2 1)</span>
#c<span style="color: #8b0000;">(</span>2/3 3/4<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; #c(2/3 3/4)</span>

#c<span style="color: #8b0000;">(</span>2 1.0<span style="color: #8b0000;">)</span>     <span style="color: #8B8989; font-style: italic;">;-&gt; #c(2.0 1.0)</span>
#c<span style="color: #8b0000;">(</span>2.0 1.0d0<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #c(2.0d0 1.0d0)</span>
#c<span style="color: #8b0000;">(</span>1/2 1.0<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; #c(0.5 1.0)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">complex canonicalization</span>
#c<span style="color: #8b0000;">(</span>3 0<span style="color: #8b0000;">)</span>       <span style="color: #8B8989; font-style: italic;">;-&gt; 3  </span>
#c<span style="color: #8b0000;">(</span>1/2 0<span style="color: #8b0000;">)</span>     <span style="color: #8B8989; font-style: italic;">;-&gt; 1/2</span>
#c<span style="color: #8b0000;">(</span>3.0 0.0<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; #c(3.0 0.0)</span>
</pre>
</div></li>
<li>GET : realpart imgpart</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org08b47ea" class="outline-3">
<h3 id="org08b47ea"><span class="section-number-3">3.2</span> Character 字符</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><p>
Literal
</p>
<div class="org-src-container">
<pre class="src src-lisp">#\x      <span style="color: #8B8989; font-style: italic;">;-&gt; #\x</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">#\char-name for no-printing (:imp-d)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-| Space, Newline, Tab, Page, Rubout, Linefeed, Return, Backspace  </span>
#\Space <span style="color: #8B8989; font-style: italic;">;-&gt; #\ </span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Unicode (&#23454;&#29616;&#20381;&#36182;)</span>
#\U4E91  <span style="color: #8B8989; font-style: italic;">; [SBCL]</span>
#\U+4E91 <span style="color: #8B8989; font-style: italic;">; [CCL]</span>
<span style="color: #8B8989; font-style: italic;">;;</span>
#\&#20113; <span style="color: #8B8989; font-style: italic;">;-&gt; #\U+4E91  </span>
</pre>
</div></li>
<li>转换 (实现依赖)
<ul class="org-ul">
<li>code-char char-code</li>
<li><p>
char-name name-char
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>char-name #\return<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Return"</span>
<span style="color: #8b0000;">(</span>char-name #\U+0<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Null"</span>
<span style="color: #8b0000;">(</span>char-name #\U+123<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Latin_Small_Letter_G_With_Cedilla"</span>

<span style="color: #8b0000;">(</span>name-char <span style="color: #61CE3C;">"Return"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #\Return</span>
<span style="color: #8b0000;">(</span>name-char <span style="color: #61CE3C;">"Null"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #\Null</span>
<span style="color: #8b0000;">(</span>name-char <span style="color: #61CE3C;">"Latin_Small_Letter_G_With_Cedilla"</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; #\Latin_Small_Letter_G_With_Cedilla</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc3ce72f" class="outline-3">
<h3 id="orgc3ce72f"><span class="section-number-3">3.3</span> String 字符串</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>表示基于 : Vector-Char : 字符向量</li>
<li><p>
创建 : Literal | make-string | make-array(:e-t='character)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #61CE3C;">"String"</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">\ : &#29992;&#20110;&#36716;&#20041; "" \ </span>
<span style="color: #61CE3C;">"Str\"ing"</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Str\"ing"</span>
<span style="color: #61CE3C;">"Str\\ing"</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Str\\ing"</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#19981;&#25903;&#25345;&#25554;&#20540;&#35821;&#27861; &#21644; \n(&#25442;&#34892;)&#31561;&#36716;&#20041;&#35821;&#27861;</span>
<span style="color: #61CE3C;">"Stri\ng"</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; "String" </span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Make</span>
<span style="color: #8b0000;">(</span>make-string 3 <span style="color: #4c83ff;">:initial-element</span> #\c<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "ccc"</span>
<span style="color: #8b0000;">(</span>make-array 5 <span style="color: #4c83ff;">:fill-pointer</span> 0 <span style="color: #4c83ff;">:adjustable</span> <span style="color: #4c83ff;">:element-type</span> 'character<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ""</span>
</pre>
</div></li>
<li><p>
字面值是否可变 ? 实现依赖
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>eq <span style="color: #61CE3C;">"abc"</span> <span style="color: #61CE3C;">"abc"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; NIL</span>
<span style="color: #8b0000;">(</span>setf s0 <span style="color: #61CE3C;">"abc"</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>setf s1 <span style="color: #61CE3C;">"abc"</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>setf <span style="color: #006400;">(</span>char s0 0<span style="color: #006400;">)</span> #\1<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>list s0 s1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">("1bc" "abc")</span>

<span style="color: #8b0000;">(</span>setf s0 <span style="color: #61CE3C;">"abc"</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>setf s1 s0<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>setf <span style="color: #006400;">(</span>char s0 0<span style="color: #006400;">)</span> #\1<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>list s0 s1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">("1bc" "1bc")</span>
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-orged0f03a" class="outline-4">
<h4 id="orged0f03a"><span class="section-number-4">3.3.1</span> GET</h4>
<div class="outline-text-4" id="text-3-3-1">
<ul class="org-ul">
<li><p>
单个元素 : char Vec.schar Arr.aref Seq.elt
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>char <span style="color: #61CE3C;">"abc"</span> 1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #\b</span>
<span style="color: #8b0000;">(</span>char <span style="color: #61CE3C;">"&#20113;"</span> 0<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #\U+4E91</span>
</pre>
</div></li>
<li>子字符串 : Seq.subseq</li>
<li><p>
长度 : Seq.length
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>length <span style="color: #61CE3C;">"1234567"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 7</span>
<span style="color: #8b0000;">(</span>length <span style="color: #61CE3C;">"&#19968;&#20108;&#19977;&#22235;&#20116;&#20845;&#19971;"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 7</span>
<span style="color: #8b0000;">(</span>length <span style="color: #61CE3C;">"&#196;&#214;&#220;1"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 4</span>
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org808f4ea" class="outline-4">
<h4 id="org808f4ea"><span class="section-number-4">3.3.2</span> Split &amp; Concat &amp; Join &amp; Trim</h4>
<div class="outline-text-4" id="text-3-3-2">
<ul class="org-ul">
<li><p>
分隔 Split : cl-ppcre:split
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">""</span> <span style="color: #61CE3C;">"hel lo"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ("h" "e" "l" " " "l" "o")</span>

<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">"\\s+"</span> <span style="color: #61CE3C;">"foo   bar baz frob"</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("foo" "bar" "baz" "frob")</span>
<span style="color: #8b0000;">(</span>ppcre:split <span style="color: #61CE3C;">"(\\s+)"</span> <span style="color: #61CE3C;">"foo   bar baz frob"</span> <span style="color: #4c83ff;">:with-registers-p</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("foo" "   " "bar" " " "baz" " " "frob")</span>

<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">"(,)|(;)"</span> <span style="color: #61CE3C;">"foo,bar;baz"</span> <span style="color: #4c83ff;">:with-registers-p</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("foo" "," NIL "bar" NIL ";" "baz") ;; ("," nil == mach(,) nomach(;))</span>
<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">"(,)|(;)"</span> <span style="color: #61CE3C;">"foo,bar;baz"</span> <span style="color: #4c83ff;">:with-registers-p</span> t <span style="color: #4c83ff;">:omit-unmatched-p</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("foo" "," "bar" ";" "baz")</span>

<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">":"</span> <span style="color: #61CE3C;">"a:b:c:d:e:f:g::"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ("a" "b" "c" "d" "e" "f" "g")</span>
<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">":"</span> <span style="color: #61CE3C;">"a:b:c:d:e:f:g::"</span> <span style="color: #4c83ff;">:limit</span> 0<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("a" "b" "c" "d" "e" "f" "g")</span>
<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">":"</span> <span style="color: #61CE3C;">"a:b:c:d:e:f:g::"</span> <span style="color: #4c83ff;">:limit</span> 2<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("a" "b:c:d:e:f:g::")</span>
<span style="color: #8b0000;">(</span>split <span style="color: #61CE3C;">":"</span> <span style="color: #61CE3C;">"a:b:c:d:e:f:g::"</span> <span style="color: #4c83ff;">:limit</span> 3<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; ("a" "b" "c:d:e:f:g::") </span>
</pre>
</div></li>
<li><p>
连接 Concat : Imp.concat
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">concat</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;rest</span> s<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>apply #'concatenate 'string s<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
<li><p>
加入 Join : Imp.join
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">join</span> <span style="color: #006400;">(</span>strs <span style="color: #afd8af;">&amp;optional</span> <span style="color: #ff1493;">(</span>separator <span style="color: #61CE3C;">" "</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>reduce <span style="color: #ff1493;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ffff00;">(</span>acc next<span style="color: #ffff00;">)</span>
            <span style="color: #ffff00;">(</span>format nil <span style="color: #61CE3C;">"~a~a~a"</span> acc separator next<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
       strs<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  
</pre>
</div></li>
<li><p>
修剪 Trim : string-trim-[left right]
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>string-trim <span style="color: #61CE3C;">"abc"</span> <span style="color: #61CE3C;">"abcaakaaakabcaaa"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "kaaak"</span>
<span style="color: #8b0000;">(</span>string-trim '<span style="color: #006400;">(</span>#\Space #\Tab #\Newline<span style="color: #006400;">)</span> <span style="color: #61CE3C;">" garbanzo beans"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "garbanzo beans"</span>
<span style="color: #8b0000;">(</span>string-trim <span style="color: #61CE3C;">" (*)"</span> <span style="color: #61CE3C;">" ( *three (silly) words* ) "</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "three (silly) words"</span>

<span style="color: #8b0000;">(</span>string-left-trim <span style="color: #61CE3C;">" (*)"</span> <span style="color: #61CE3C;">" ( *three (silly) words* ) "</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "three (silly) words* ) "</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgf4aa4c5" class="outline-4">
<h4 id="orgf4aa4c5"><span class="section-number-4">3.3.3</span> Search &amp; Replace</h4>
<div class="outline-text-4" id="text-3-3-3">
<ul class="org-ul">
<li><p>
匹配 : Seq.(find position) Seq.(search mismatch) cl-ppcre:(scan-[to-strings] all-matches-[as-strings])
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#36820;&#22238; &#39033; &#25110; NIL</span>
<span style="color: #8b0000;">(</span>find #\a <span style="color: #61CE3C;">"foobarbaz"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #\a</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#36820;&#22238; &#20301;&#32622; &#25110; NIL</span>
<span style="color: #8b0000;">(</span>position #\a <span style="color: #61CE3C;">"foobarbaz"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 4</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#21305;&#37197;&#30340;&#31532;&#19968;&#20010;&#20301;&#32622;</span>
<span style="color: #8b0000;">(</span>search <span style="color: #61CE3C;">"bar"</span> <span style="color: #61CE3C;">"foobarbaz"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span>search <span style="color: #61CE3C;">"Bar"</span> <span style="color: #61CE3C;">"foobarbaz"</span> <span style="color: #4c83ff;">:test</span> #'string=<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; NIL</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#19981;&#21305;&#37197;&#30340;&#31532;&#19968;&#20010;&#20301;&#32622;</span>
<span style="color: #8b0000;">(</span>mismatch <span style="color: #61CE3C;">"foobarbaz"</span> <span style="color: #61CE3C;">"foom"</span><span style="color: #8b0000;">)</span>            <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#19981;&#21305;&#37197;&#30340;&#31532;&#19968;&#20010;&#20301;&#32622;&#32034;&#24341;+1</span>
<span style="color: #8b0000;">(</span>mismatch <span style="color: #61CE3C;">"foobarbaz"</span> <span style="color: #61CE3C;">"baz"</span> <span style="color: #4c83ff;">:from-end</span> t<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">scan -&gt; match:(start end) register-match:(start end)</span>
<span style="color: #8b0000;">(</span>scan <span style="color: #61CE3C;">"(a)*b"</span> <span style="color: #61CE3C;">"xaaabd"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1 ;-&gt; 5 ;-&gt; #(3) ;-&gt; #(4)</span>
<span style="color: #8b0000;">(</span>scan-to-strings <span style="color: #61CE3C;">"(([</span><span style="color: #61CE3C;">^</span><span style="color: #61CE3C;">b])*)b"</span> <span style="color: #61CE3C;">"aaabd"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "aaab" ;-&gt; #("aaa" "a")</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">all-matches -&gt; match:(start end)</span>
<span style="color: #8b0000;">(</span>all-matches <span style="color: #61CE3C;">"a"</span> <span style="color: #61CE3C;">"foo bar baz"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (5 6 9 10)</span>
<span style="color: #8b0000;">(</span>all-matches-as-strings <span style="color: #61CE3C;">"\\d"</span> <span style="color: #61CE3C;">"bar 3 baz 5"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ("3" "5")</span>
</pre>
</div></li>
<li><p>
替代 : Seq.substitute cl-ppcre:regex-replace-[all]  (破坏 : Seq.replace Seq.fill)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>substitute #\c #\a <span style="color: #61CE3C;">"abababab"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "cbcbcbcb"</span>
<span style="color: #8b0000;">(</span>substitute #\c #\A <span style="color: #61CE3C;">"abababab"</span> <span style="color: #4c83ff;">:test</span> 'string=<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "abababab"</span>

<span style="color: #8b0000;">(</span>regex-replace <span style="color: #61CE3C;">"fo+"</span> <span style="color: #61CE3C;">"foo bar"</span> <span style="color: #61CE3C;">"frob"</span><span style="color: #8b0000;">)</span>     <span style="color: #8B8989; font-style: italic;">;-&gt; "frob bar" ;-&gt; T</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#24573;&#30053;&#22823;&#23567;&#20889;&#21305;&#37197;</span>
<span style="color: #8b0000;">(</span>regex-replace <span style="color: #61CE3C;">"(?i)fo+"</span> <span style="color: #61CE3C;">"FOO bar"</span> <span style="color: #61CE3C;">"frob"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "frob bar" ;-&gt; T</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#20445;&#30041;&#30446;&#26631;&#23383;&#31526;&#20018;&#22823;&#23567;&#20889;&#26679;&#24335;</span>
<span style="color: #8b0000;">(</span>regex-replace <span style="color: #61CE3C;">"(?i)fo+"</span> <span style="color: #61CE3C;">"Foo bar"</span> <span style="color: #61CE3C;">"frob"</span> <span style="color: #4c83ff;">:preserve-case</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; "Frob bar" ;-&gt; T</span>
<span style="color: #8b0000;">(</span>regex-replace-all <span style="color: #61CE3C;">"(?i)fo+"</span> <span style="color: #61CE3C;">"foo Fooo FOOOO bar"</span> 
                   <span style="color: #61CE3C;">"frob"</span> <span style="color: #4c83ff;">:preserve-case</span> t<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; "frob Frob FROB bar" ;-&gt; T</span>
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org706fca5" class="outline-4">
<h4 id="org706fca5"><span class="section-number-4">3.3.4</span> Compare</h4>
<div class="outline-text-4" id="text-3-3-4">
<ul class="org-ul">
<li>大小写敏感 : string[= /= &lt; &gt; &lt;= &gt;=]</li>
<li>不敏感 : string-[equal not-equal lessp greaterp not-greaterp not-lessp]</li>
<li><p>
前缀 和 后缀 : Imp.(prefixp suffixp)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">prefixp</span> <span style="color: #006400;">(</span>start s <span style="color: #afd8af;">&amp;key</span> <span style="color: #ff1493;">(</span>test #'string=<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span>m <span style="color: #00ff00;">(</span>mismatch start s <span style="color: #4c83ff;">:test</span> test<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>or <span style="color: #ffff00;">(</span>null m<span style="color: #ffff00;">)</span> <span style="color: #ffff00;">(</span>= m <span style="color: #00ff00;">(</span>length start<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>


<span style="color: #8b0000;">(</span>prefixp <span style="color: #61CE3C;">"foo"</span> <span style="color: #61CE3C;">"foobarbaz"</span> <span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; T</span>
<span style="color: #8b0000;">(</span>prefixp <span style="color: #61CE3C;">"foo"</span> <span style="color: #61CE3C;">"foo"</span> <span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; T</span>
<span style="color: #8b0000;">(</span>prefixp <span style="color: #61CE3C;">"foo"</span> <span style="color: #61CE3C;">"barbaz"</span> <span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; NIL</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">suffixp</span> <span style="color: #006400;">(</span>end s <span style="color: #afd8af;">&amp;key</span> <span style="color: #ff1493;">(</span>test #'string=<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">case</span> <span style="color: #ff1493;">(</span>mismatch end s <span style="color: #4c83ff;">:from-end</span> t <span style="color: #4c83ff;">:test</span> test<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span>0 nil<span style="color: #ffff00;">)</span> t<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">(</span>t nil<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span>suffixp <span style="color: #61CE3C;">"baz"</span> <span style="color: #61CE3C;">"foobaz"</span> <span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; T</span>

</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orgbb6e0f8" class="outline-4">
<h4 id="orgbb6e0f8"><span class="section-number-4">3.3.5</span> Regex</h4>
<div class="outline-text-4" id="text-3-3-5">
<ul class="org-ul">
<li>Lib:cl-ppcre</li>
</ul>
</div>
</div>
<div id="outline-container-org855039a" class="outline-4">
<h4 id="org855039a"><span class="section-number-4">3.3.6</span> Coding</h4>
<div class="outline-text-4" id="text-3-3-6">
<ul class="org-ul">
<li>Lib:<a href="https://github.com/cl-babel/babel">babel</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3e5f2a5" class="outline-4">
<h4 id="org3e5f2a5"><span class="section-number-4">3.3.7</span> Other</h4>
<div class="outline-text-4" id="text-3-3-7">
<ul class="org-ul">
<li><p>
string-[upcase downcase capitalize]
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>string-upcase <span style="color: #61CE3C;">"abcde"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "ABCDE"</span>
<span style="color: #8b0000;">(</span>string-downcase <span style="color: #61CE3C;">"ABCDE"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "abcde"</span>
<span style="color: #8b0000;">(</span>string-capitalize <span style="color: #61CE3C;">"hello Good MORING"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; "Hello Good Moring"</span>
<span style="color: #8b0000;">(</span>string-capitalize 'kludgy-hash-search<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "Kludgy-Hash-Search"</span>
<span style="color: #8b0000;">(</span>string-capitalize <span style="color: #61CE3C;">"DON'T!"</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;  "Don'T!" ;: not "Don't!"  </span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgab059b7" class="outline-2">
<h2 id="orgab059b7"><span class="section-number-2">4</span> 基础</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-orgab79f52" class="outline-3">
<h3 id="orgab79f52"><span class="section-number-3">4.1</span> 变量 和 常量</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Variable 变量
</p>
<ul class="org-ul">
<li><p>
Global (Dynamic) : defparameter defvar  (命名约定: <code>*name*</code>)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">defparameter</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">*foo*</span> 5<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">*foo*</span> <span style="color: #006400;">(</span>+ 1 2<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>            <span style="color: #8B8989; font-style: italic;">; *foo* == 3</span>

<span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">defvar</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defvar</span> <span style="color: #ff69b4;">*bar*</span> 5<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">; *bar* = 5</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#37325;&#23450;&#20041;&#19981;&#25913;&#21464;&#20043;&#21069;&#23450;&#20041;&#26102;&#30340;&#20540;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defvar</span> <span style="color: #ff69b4;">*bar*</span> 6<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">; *bar* == 5</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#23450;&#20041;&#26102;&#21487;&#20197;&#19981;&#35774;&#32622;&#20540;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defvar</span> <span style="color: #ff69b4;">*bar*</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">; *bar* == Unbound</span>
</pre>
</div></li>
<li><p>
Local : let let*(可引用变量列表中早先引入的变量)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">let</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 5<span style="color: #ff1493;">)</span> &#1113093;
      <span style="color: #ff1493;">(</span>b 6<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>+ a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 11</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">let*</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let*</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a 5<span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>b <span style="color: #ffff00;">(</span>+ a 2<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  b<span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 7</span>
</pre>
</div></li>
</ul>

<p>
Constant 常量
</p>
<ul class="org-ul">
<li><p>
defconstant (命名约定: <code>+name+</code>)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defconstant</span> <span style="color: #ff69b4;">+name+</span> initial-value-form <span style="color: #006400;">(</span>doucmentation-string<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  
</pre>
</div></li>
</ul>


<p>
Dynamic (Special) Variable  (!!! 注意命名)
</p>
<ul class="org-ul">
<li>all global variable are dynamic variable</li>
<li><p>
Lexical scope &amp; Dynamic extent variable 词法范围 和 动态作用域 变量
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Lexical scope variable</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x 3<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #ff1493;">()</span> x<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span>                <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x 5<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>test<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Dynamic extent variable</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defvar</span> <span style="color: #ff69b4;">*special*</span> 3<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #006400;">()</span> *special*<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>*special* 5<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>test<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 5</span>


<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">!!! &#27880;&#24847;&#21629;&#21517; : &#21542;&#21017;&#38590;&#20197;&#20998;&#28165; &#21487;&#23548;&#33268;&#20351;&#29992;&#38169;&#35823;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">x</span> 3<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #006400;">()</span> x<span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x 0<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>test<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; 0</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x 1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #ff1493;">()</span> x<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x 0<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>test<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 0</span>
</pre>
</div></li>
<li><p>
Special: (declare (special ..))
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>y 1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #ff1493;">()</span> y<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>y 1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">test</span> <span style="color: #ff1493;">()</span>
    <span style="color: #ff1493;">(</span><span style="color: #4c83ff;">declare</span> <span style="color: #ffff00;">(</span>special y<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
    y<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>test<span style="color: #8b0000;">)</span>  <span style="color: #8B8989; font-style: italic;">;-&gt; Error: Unbound y</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">progn</span> <span style="color: #006400;">(</span><span style="color: #4c83ff;">defparameter</span> <span style="color: #ff69b4;">y</span> 3<span style="color: #006400;">)</span>
       <span style="color: #006400;">(</span>test<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 3</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgef41884" class="outline-3">
<h3 id="orgef41884"><span class="section-number-3">4.2</span> 函数</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><p>
Lambda : 匿名函数
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #006400;">(</span>n<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>/ n 2<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>                   
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; #&lt;Anonymous Function #x302000DB47EF&gt;</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">Call</span>
<span style="color: #8b0000;">(</span>funcall #'<span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">(</span>x y<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>+ x y<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> 2 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 5</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">(</span>x y<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span>+ x y<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> 2 3<span style="color: #8b0000;">)</span>           <span style="color: #8B8989; font-style: italic;">;-&gt; 5</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">()</span> 42<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>                       <span style="color: #8B8989; font-style: italic;">;-&gt; 42</span>
</pre>
</div></li>
<li>Name 命名
<ul class="org-ul">
<li><p>
Global: defun
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">name</span> <span style="color: #006400;">(</span>arguments<span style="color: #006400;">)</span>
  <span style="color: #FBDE2D;">"Optional document string"</span>
  body-form<span style="color: #8b0000;">)</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">six</span> <span style="color: #006400;">()</span> <span style="color: #006400;">(</span>+ 3 3<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>six<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>
</pre>
</div></li>
<li><p>
Local: flet labels(call another|recursion)
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">flet</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>f <span style="color: #ffff00;">(</span>n<span style="color: #ffff00;">)</span>
         <span style="color: #ffff00;">(</span>+ n 10<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
       <span style="color: #ff1493;">(</span>g <span style="color: #ffff00;">(</span>n<span style="color: #ffff00;">)</span>
         <span style="color: #ffff00;">(</span>- n 3<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>g <span style="color: #ff1493;">(</span>f 5<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 12</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">labels</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>a <span style="color: #ffff00;">(</span>n<span style="color: #ffff00;">)</span>
           <span style="color: #ffff00;">(</span>+ n 5<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
         <span style="color: #ff1493;">(</span>b <span style="color: #ffff00;">(</span>n<span style="color: #ffff00;">)</span>
           <span style="color: #ffff00;">(</span>+ <span style="color: #00ff00;">(</span>a n<span style="color: #00ff00;">)</span> 6<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>b 10<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 21</span>
</pre>
</div></li>
</ul></li>
<li><p>
Function Object: function (sugar:#')
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#24341;&#29992; &#31526;&#21495;&#21629;&#21517;&#30340;&#20989;&#25968; (&#36890;&#24120;&#20026; defun&#20840;&#23616;&#23450;&#20041;&#30340;)</span>
<span style="color: #8b0000;">(</span>function car<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Compiled-function CAR #x3000000FC18F&gt;</span>
#'car          <span style="color: #8B8989; font-style: italic;">;-&gt; #&lt;Compiled-function CAR #x3000000FC18F&gt;</span>
</pre>
</div></li>
<li>函数 既可以作为 定义抽象的方式 来产生抽象 也可以 作为一个抽象来使用
<ul class="org-ul">
<li>Higher-Order (first-class fun) : as paramater or return-value</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org65bcb6e" class="outline-4">
<h4 id="org65bcb6e"><span class="section-number-4">4.2.1</span> Call</h4>
<div class="outline-text-4" id="text-4-2-1">
<ul class="org-ul">
<li><p>
apply | funcall
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(&#26368;&#21518;&#19968;&#20010;&#21442;&#25968;&#38656;&#35201;&#26159;&#19968;&#20010;&#21015;&#34920;)</span>
<span style="color: #8b0000;">(</span>apply <span style="color: #006400;">(</span>function car<span style="color: #006400;">)</span> '<span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>x y<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; X</span>
<span style="color: #8b0000;">(</span>apply #'+ '<span style="color: #006400;">(</span>1 2 3 4 8<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>        <span style="color: #8B8989; font-style: italic;">;-&gt; 18</span>
<span style="color: #8b0000;">(</span>apply #'+ 1 2 '<span style="color: #006400;">(</span>3<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>            <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>

<span style="color: #8b0000;">(</span>funcall #'+ 1 3 5<span style="color: #8b0000;">)</span>    <span style="color: #8B8989; font-style: italic;">;-&gt; 9</span>
<span style="color: #8b0000;">(</span>funcall #'car '<span style="color: #006400;">(</span>x y<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; X</span>
</pre>
</div></li>
<li><p>
局部函数的调用问题 : 先 局部  若使用 符号 而不是 #' 则 全局
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>x<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>+ x 42<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 0<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 42</span>
<span style="color: #8b0000;">(</span>funcall 'foo 0<span style="color: #8b0000;">)</span>                        <span style="color: #8B8989; font-style: italic;">;-&gt; 42</span>
<span style="color: #8b0000;">(</span>funcall #'foo 0<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 42</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">flet</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>foo <span style="color: #ffff00;">(</span>x<span style="color: #ffff00;">)</span> <span style="color: #ffff00;">(</span>1+ x<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list <span style="color: #ff1493;">(</span>foo 0<span style="color: #ff1493;">)</span>                         <span style="color: #8B8989; font-style: italic;">; Local</span>
        <span style="color: #ff1493;">(</span>funcall 'foo 0<span style="color: #ff1493;">)</span>                <span style="color: #8B8989; font-style: italic;">; Global</span>
        <span style="color: #ff1493;">(</span>funcall #'foo 0<span style="color: #ff1493;">)</span>               <span style="color: #8B8989; font-style: italic;">; Local</span>
        <span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; (1 42 1)</span>
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-org8c9378c" class="outline-4">
<h4 id="org8c9378c"><span class="section-number-4">4.2.2</span> Paramater list</h4>
<div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li><p>
&amp;optional 可选
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Optional</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>a b <span style="color: #afd8af;">&amp;optional</span> c d<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list a b c d<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 1 2<span style="color: #8b0000;">)</span>     <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 NIL NIL) </span>
<span style="color: #8b0000;">(</span>foo 1 2 3<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 3 NIL)</span>
<span style="color: #8b0000;">(</span>foo 1 2 3 4<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 3 4)  </span>
</pre>
</div></li>
<li><p>
&amp;key 关键字
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Keyword </span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;key</span> a b <span style="color: #ff1493;">(</span>c 3<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list a b c<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo<span style="color: #8b0000;">)</span>                <span style="color: #8B8989; font-style: italic;">;-&gt; (NIL NIL 3)</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:b</span> 1<span style="color: #8b0000;">)</span>           <span style="color: #8B8989; font-style: italic;">;-&gt; (NIL 1 3)</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:a</span> 1 <span style="color: #4c83ff;">:b</span> 2 <span style="color: #4c83ff;">:c</span> 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 3)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#21306;&#20998;&#22806;&#37096;&#21644;&#20869;&#37096;&#35843;&#29992;&#21517;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;key</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span><span style="color: #4c83ff;">:apple</span> a<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span><span style="color: #4c83ff;">:box</span> b<span style="color: #ffff00;">)</span> 0<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:apple</span> 1 <span style="color: #4c83ff;">:box</span> 2<span style="color: #8b0000;">)</span>  

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#20851;&#38190;&#23383;&#21517; &#21487;&#19981;&#20026; &#20851;&#38190;&#23383;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">baz</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;key</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span>foo bar<span style="color: #ffff00;">)</span> 42<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
           <span style="color: #006400;">(</span>list bar<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>baz 'foo 23<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (23)</span>
</pre>
</div></li>
<li><p>
Default value 默认值
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Default Value</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>a <span style="color: #afd8af;">&amp;optional</span> <span style="color: #ff1493;">(</span>b 10<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 1 2<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2)</span>
<span style="color: #8b0000;">(</span>foo 1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 10)</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">value &#21487;&#20197;&#26159;&#20219;&#20309; lisp &#34920;&#36798;&#24335;</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#21487;&#20381;&#36182;&#21069;&#38754;&#30340;&#21442;&#25968;</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>a <span style="color: #afd8af;">&amp;optional</span> <span style="color: #ff1493;">(</span>b a<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 1 2<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2)</span>
<span style="color: #8b0000;">(</span>foo 1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 1)</span>
</pre>
</div></li>
<li><p>
supplied-p : 用于判断是否提供了实参
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">supplied-p</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>a <span style="color: #afd8af;">&amp;optional</span> <span style="color: #ff1493;">(</span>c 3 c-supplied-p<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span> 
  <span style="color: #006400;">(</span>list a c c-supplied-p<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 1<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; (1 3 NIL)</span>
<span style="color: #8b0000;">(</span>foo 1 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 3 T)  </span>
</pre>
</div></li>
<li><p>
&amp;rest
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">rest </span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">my+</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;rest</span> nums<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>apply #'+ nums<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>  
</pre>
</div></li>
<li><p>
&amp;aux : define auxiliary local variables
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">auxiliary</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">average</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;rest</span> args
                <span style="color: #afd8af;">&amp;aux</span> <span style="color: #ff1493;">(</span>len <span style="color: #ffff00;">(</span>length args<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>/ <span style="color: #ff1493;">(</span>reduce #'+ args<span style="color: #ff1493;">)</span> len 1.0<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>average 1 2 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 2.0</span>
</pre>
</div></li>
<li>&amp;allow-other-keys : 允许未定义的关键字参数 并收集于此</li>
</ul>

<p>
参数数量上限  
</p>
<ul class="org-ul">
<li>call-arguments-limit</li>
<li>lambda-parameters-limit</li>
</ul>

<p>
组合使用问题
</p>
<ul class="org-ul">
<li>Order: required &amp;optional &amp;rest &amp;key
<ul class="org-ul">
<li><p>
&amp;rest and &amp;key
</p>
<div class="org-src-container">
<pre class="src src-lisp">  <span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">&amp;rest + &amp;key : &#21482;&#33021;&#20351;&#29992;key</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span><span style="color: #afd8af;">&amp;rest</span> rest <span style="color: #afd8af;">&amp;key</span> a b c<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list rest a b c<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:a</span> 1 <span style="color: #4c83ff;">:b</span> 2 <span style="color: #4c83ff;">:c</span> 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ((:A 1 :B 2 :C 3) 1 2 3)</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:a</span> 1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; ((:A 1) 1 NIL NIL)</span>
<span style="color: #8b0000;">(</span>foo 1 2<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; Error</span>
<span style="color: #8b0000;">(</span>foo 1 2 <span style="color: #4c83ff;">:a</span> 1<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; Error</span>
<span style="color: #8b0000;">(</span>foo <span style="color: #4c83ff;">:a</span> 2 1 2<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; Error</span>
</pre>
</div></li>
</ul></li>
<li>Avoid
<ul class="org-ul">
<li><p>
&amp;optional + &amp;key
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">defun</span> <span style="color: #ff1493;">foo</span> <span style="color: #006400;">(</span>x <span style="color: #afd8af;">&amp;optional</span> y <span style="color: #afd8af;">&amp;key</span> z<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>list x y z<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>foo 1 2 <span style="color: #4c83ff;">:z</span> 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 2 3)</span>
<span style="color: #8b0000;">(</span>foo 1<span style="color: #8b0000;">)</span>        <span style="color: #8B8989; font-style: italic;">;-&gt; (1 nil nil) </span>
<span style="color: #8b0000;">(</span>foo 1 <span style="color: #4c83ff;">:z</span> 3<span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; Error: Incorrect keyword arguments in (3) .</span>
<span style="color: #8b0000;">(</span>foo 1 <span style="color: #4c83ff;">:z</span> <span style="color: #4c83ff;">:z</span> 3<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (1 :Z 3)</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga77c479" class="outline-4">
<h4 id="orga77c479"><span class="section-number-4">4.2.3</span> Return Value</h4>
<div class="outline-text-4" id="text-4-2-3">
<ul class="org-ul">
<li>返回值 Return value : 默认返回最后一个表达式的值</li>
<li><p>
返回多值 Return Multi-Values : values values-list
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8B8989; font-style: italic;">;;; </span><span style="color: #8B8989; font-style: italic;">Return Multi-Values</span>
<span style="color: #8b0000;">(</span>values 'a nil <span style="color: #006400;">(</span>+ 1 2<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span><span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; a ;-&gt; nil ;-&gt; 3</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#21015;&#34920;&#20316;&#20026;&#21442;&#25968;</span>
<span style="color: #8b0000;">(</span>values-list '<span style="color: #006400;">(</span>1 2<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1 ;-&gt; 2</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#36820;&#22238;&#20540; &#20256;&#36882;</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">()</span> 
   <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #00ff00;">()</span> <span style="color: #00ff00;">(</span>values 1 2<span style="color: #00ff00;">)</span><span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1 ;-&gt; 2</span>
<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#22810;&#36820;&#22238;&#20540;&#20316;&#20026;&#21442;&#25968; &#21482;&#26377;&#31532;&#19968;&#20010;&#34987;&#20351;&#29992;</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">(</span>x<span style="color: #ff1493;">)</span> x<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>values 1 2<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">&#33509;&#19981;&#38656;&#35201;&#20351;&#29992;&#36820;&#22238;&#20540;</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">()</span> <span style="color: #ff1493;">(</span>format t <span style="color: #61CE3C;">"~a"</span> 1<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1 ;-&gt; NIL</span>
<span style="color: #8b0000;">(</span><span style="color: #006400;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ff1493;">()</span>
   <span style="color: #ff1493;">(</span>format t <span style="color: #61CE3C;">"~a"</span> 1<span style="color: #ff1493;">)</span>
   <span style="color: #ff1493;">(</span>values<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8B8989; font-style: italic;">;;</span><span style="color: #8B8989; font-style: italic;">-&gt; 1 ;-&gt; ; No value</span>

<span style="color: #8B8989; font-style: italic;">;; </span><span style="color: #8B8989; font-style: italic;">(values) &#19981;&#26159; &#19981;&#36820;&#22238;&#20540;</span>
<span style="color: #8b0000;">(</span>+<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;0</span>
<span style="color: #8b0000;">(</span>+ <span style="color: #006400;">(</span>values<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">; Error: The value NIL is not of the expected type NUMBER.</span>
<span style="color: #8b0000;">(</span>null <span style="color: #006400;">(</span>values<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; T</span>
</pre>
</div></li>
<li>处理多返回值
<ul class="org-ul">
<li><p>
多值绑定 : multipel-value-bind
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span><span style="color: #4c83ff;">multiple-value-bind</span> <span style="color: #006400;">(</span>a b<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>values 2 3<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>* a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>   <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">multiple-value-bind</span> <span style="color: #006400;">(</span>a b<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>values 2 3 2<span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>* a b<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>
<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">multiple-value-bind</span> <span style="color: #006400;">(</span>a b c<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>values 2 3<span style="color: #006400;">)</span>
  c<span style="color: #8b0000;">)</span>       <span style="color: #8B8989; font-style: italic;">;-&gt; nil</span>
</pre>
</div></li>
<li><p>
多值作为函数参数 : multiple-value-call
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>funcall #'+ <span style="color: #006400;">(</span>values 1 2 3<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt;1</span>
<span style="color: #8b0000;">(</span>multiple-value-call #'+ <span style="color: #006400;">(</span>values 1 2 3<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 6</span>

<span style="color: #8b0000;">(</span>funcall #'+ <span style="color: #006400;">(</span>values 1 2 3<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>values 4 5 6<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 5</span>
<span style="color: #8b0000;">(</span>multiple-value-call #'+ <span style="color: #006400;">(</span>values 1 2 3<span style="color: #006400;">)</span> <span style="color: #006400;">(</span>values 4 5 6<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 21</span>
</pre>
</div></li>
<li><p>
多值-&gt;列表 : multiple-value-list
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>multiple-value-list <span style="color: #006400;">(</span>values 'a 'b 'c<span style="color: #006400;">)</span><span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; (A B C)</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org4313bf9" class="outline-4">
<h4 id="org4313bf9"><span class="section-number-4">4.2.4</span> Closures</h4>
<div class="outline-text-4" id="text-4-2-4">
<ul class="org-ul">
<li><p>
闭包 Closures : 捕捉创建时的环境信息 : 捕获的是变量 不是值
</p>
<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #8b0000;">(</span>setf fn <span style="color: #006400;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #ff1493;">(</span><span style="color: #ffff00;">(</span>i 3<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span> #'<span style="color: #ff1493;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ffff00;">(</span>x<span style="color: #ffff00;">)</span> <span style="color: #ffff00;">(</span>+ x i<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
<span style="color: #8b0000;">(</span>funcall *fn*<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 1</span>
<span style="color: #8b0000;">(</span>funcall *fn*<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 2</span>
<span style="color: #8b0000;">(</span>funcall *fn*<span style="color: #8b0000;">)</span> <span style="color: #8B8989; font-style: italic;">;-&gt; 3</span>

<span style="color: #8b0000;">(</span><span style="color: #4c83ff;">let</span> <span style="color: #006400;">(</span><span style="color: #ff1493;">(</span>count 0<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span>
  <span style="color: #006400;">(</span>list
   #'<span style="color: #ff1493;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ffff00;">()</span> <span style="color: #ffff00;">(</span>incf count<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
   #'<span style="color: #ff1493;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ffff00;">()</span> <span style="color: #ffff00;">(</span>decf count<span style="color: #ffff00;">)</span><span style="color: #ff1493;">)</span>
   #'<span style="color: #ff1493;">(</span><span style="color: #4c83ff;">lambda</span> <span style="color: #ffff00;">()</span> count<span style="color: #ff1493;">)</span><span style="color: #006400;">)</span><span style="color: #8b0000;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org08b3465" class="outline-3">
<h3 id="org08b3465"><span class="section-number-3">4.3</span> 控制流</h3>
</div>
</div>

<div id="outline-container-org60bb998" class="outline-2">
<h2 id="org60bb998"><span class="section-number-2">5</span> 概念</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org4adaf2a" class="outline-3">
<h3 id="org4adaf2a"><span class="section-number-3">5.1</span> Scope &amp; Extent 作用域 和 生命周期</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>Scope (space) &amp; Extent (time) : Visibility &amp; Lifetime
<ul class="org-ul">
<li>lexical 词法</li>
<li>dynamic 动态</li>
</ul></li>
<li>Shadowing
<ul class="org-ul">
<li>同名 : 后者可能屏蔽前者</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
